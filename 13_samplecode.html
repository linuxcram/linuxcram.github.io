<!DOCTYPE html>
<html lang="en">
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>linuxcram.github.io - 13_samplecode</title>
<style>
header {
  width: 100%;
}
body {
  background: #333333;
  color: #f2f2f2;
  font-size: 14px;
  font-family: monospace;
  text-align: left;
  line-height: 1.3;
  margin: 0;
  border: 20px solid transparent;
}
a:link {
  color: #ff6000;
  background-color: transparent;
  text-decoration: none;
}
a:visited {
  color: #00bbbb;
  background-color: transparent;
  text-decoration: none;
}
a:active {
  color: #00bb00;
  background-color: transparent;
}
hr {
  height: 3px;
  background-color: #00ee00;
  border: none;
}
</style>
</head>
<body>
<div style="text-align: center;">
<img src="https://raw.githubusercontent.com/linuxcram/linuxcram.github.io/main/logo_hackersgen.png" alt="logo_hackersgen" width="348" height="50">
<br>
<img src="https://raw.githubusercontent.com/linuxcram/linuxcram.github.io/main/tux01.png" alt="Tux" width="45" height="45">
<h2>
linuxcram.github.io
</h2>
<img src="https://raw.githubusercontent.com/linuxcram/linuxcram.github.io/main/logo_sorint.png" alt="logo_sorint" width="102" height="30">
&nbsp;&nbsp;&nbsp;
<img src="https://raw.githubusercontent.com/linuxcram/linuxcram.github.io/main/logo_sorint1.png" alt="logo_sorint1" width="30" height="30">
</div>
<h3><a href="https://linuxcram.github.io/">HOME</a></h3>
<div style="text-align: center;">
<p>
<a href="https://linuxcram.github.io/12_hints.html">[12_hints]</a>
 &lt; &gt; 
<a href="https://linuxcram.github.io/14_loops.html">[14_loops]</a>
</p>
</div>
<hr>
<h3>[13_samplecode]
<br>
<br>
Scripts creation</h3>
The creation of a script is a task that consist in creating a text file.
<br>
Sometimes, high levels of confidence bring people to create (short) scripts using one text block "copy and paste".
<br>
<br>
In this example we want to create a script file "script.sh" (more information about scripts in the next sections).
<br>
<b>The script should run the commands [ls text*.txt ; date ] in a directory that contains some files named text1.txt text2.txt text3.txt,
<br>
once done the script should be deleted automatically.</b>
<br>
<br>
eg. to quickly create some files in the current path # (MATCHING PATTERN) touch text{1..3}.txt # (NON MATCHING PATTERN) touch file{1..3}.txt
<br>
<br>
<b>Many task like this can be accomplished in many ways with the use of different algorithms, flows and commands.</b>
<br>
<br>
The chars ./ before a path or filename mean that the file is located in the current directory
<br>
omitting ./ the result is the same for most commands.
<br>
<br>
Since we are planning to write text in the file, its creation can be done by vi itself, once given the file name as argument to vi,
<br>
so the creation of the file with touch can be skipped this is not necessary # touch ./script.sh  # same result of file creation obtained with # touch script.sh
<br>
<br>
Creation of the script:
<br>
vi ./script.sh  # since we are working in the current directory it's the same of # vi script.sh
<br>
<br>
# vi is set to command mode by default, if the file does not exist, a new file is created and ready for editing
<br>
<br>
# press i to activate insert mode
<br>
# digit the commands requested in the description and remember to put the shebang in the first line #!/bin/bash
<br>
<br>
#!/bin/bash
<br>
ls text*.txt
<br>
date
<br>
<br>
# press ESC to go back to command mode, then press :wq to save the file and quit the vi session
<br>
<br>
# Set executable permissions to the script
<br>
chmod +x script.sh 
<br>
# Run the script
<br>
./script.sh
<br>
# Delete the script
<br>
rm ./script.sh
<br>
<br>
<br>
<h4>Same ...but doing one copy and paste</h4>
Copying and pasting a block of lines will perform the quick script creation, execution and deletion without manually editing of any file.
<br>
<br>
<b>This is not the preferred way since the risk of performing unwanted task is high for many reasons.</b>
<br>
<br>
Remember that if the strings contain special chars like $ the escape character is required to avoid skipping
<br>
eg. for variables $SHELL we will write \$SHELL
<br>
We use the \ excape character to execute multiple commands as they would be run on the same line (one-liner style)
<br>
We will set executable permissions to the script, execute it, delete it all in one line.
<br>
Using the && operator, every step will be executed only if the previous one does not produce any error.
<br>
# code #
<br>
<br>
cat &lt;&lt; EOF > script.sh
<br>
#!/bin/bash
<br>
echo \$SHELL
<br>
ls text*.txt
<br>
date
<br>
EOF
<br>
chmod +x script.sh && \
<br>
./script.sh && \
<br>
rm ./script.sh
<br>
<br>
Sample output of this bunch of lines copied and pasted in the terminal, the file script.sh is created, , make executable, executed, deleted.
<br>
/bin/bash
<br>
text1.txt  text2.txt  text3.txt
<br>
Tue Dec 13 10:47:23 AM CET 2022
<br>
<br>
<hr>
<div style="text-align: center;">
<p>
<a href="https://linuxcram.github.io/12_hints.html">[12_hints]</a>
 &lt; &gt; 
<a href="https://linuxcram.github.io/14_loops.html">[14_loops]</a>
</p>
</div>
<h3><a href="https://linuxcram.github.io/">HOME</a></h3>
<div style="text-align: center;">
<p>
<img src="https://raw.githubusercontent.com/linuxcram/linuxcram.github.io/main/logo_sorint.png" alt="logo_sorint" width="102" height="30">
&nbsp;&nbsp;&nbsp;
<img src="https://raw.githubusercontent.com/linuxcram/linuxcram.github.io/main/logo_sorint1.png" alt="logo_sorint1" width="30" height="30">
</p>
</div>
</body>
</html>
