<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>linuxcram.github.io - 15_scripts</title>
<style type="text/css">
header {
    width: 100%;
}
body {
  background: #333333;
  color: #f2f2f2;
  font-size: 14px;
  font-family: monospace;
  text-align: left;
  line-height: 1.3;
  margin: 0;
  border: 20px solid transparent;
}
a:link {
  color: #ff6000;
  background-color: transparent;
  text-decoration: none;
}
a:visited {
  color: #00bbbb;
  background-color: transparent;
  text-decoration: none;
}
a:active {
  color: #00bb00;
  background-color: transparent;
}
hr {
  height: 3px;
  background-color: #00ee00;
  border: none;
}
</style>
</head>
<body>
<center>
<img src="https://raw.githubusercontent.com/linuxcram/linuxcram.github.io/main/tux01.png" alt="Tux" width="33" height="33">
<h2>
linuxcram.github.io
<br>
[15_scripts]
</h2>
</center>
<h3><a href="https://linuxcram.github.io/">HOME</a></h3>
<hr>
<h3>BASH scripts</h3>
<br>
<br>
Note: when logged on a Linux system the prompt is preceeded by username, hostname, and the &tilde; between [ ]
<br>
<br>
Standard users have a $ prompt symbol, while root has a # prompt symbol to distinguish its privileged account.
<br>
[username@hostname ~]$
<br>
[root@hostname &tilde;]#
<br>
<br>
<br>
<h3>Syntax</h3>
Bash accepts single commands, the terminator is implied with the end of the line, the newline char "\n"
<br>
<br>
[student@linux &tilde;]$ echo "Hello world"
<br>
Hello world
<br>
<br>
This program is represented by a single command with an explicit terminator
<br>
<br>
[student@linux &tilde;]$ echo "Hello world";
<br>
Hello world
<br>
<br>
<b>Commands separators and Exit codes</b>
<br>
The ; Command separator allows to execute multiple commands sequentially on a single line, each command is executed regardless of the outcome of the previous command.
<br>
eg. ls -l; free -h; ls -l /rooot; date
<br>
<br>
The &amp;&amp; command separator that will let the second command run, only if the first one runs without errors.
<br>
<br>
The exit code value of 0 means without errors, and it can be checked executing "echo $?" after a command to display its exit code.
<br>
<br>
A non-zero (1-255) exit status means that the command had a failure.
<br>
<br>
<h4>Common Exit status / Description</h4>
1 	Catchall for general errors
<br>
2 	Misuse of shell builtins
<br>
126 	Command invoked cannot execute
<br>
127 	Command not found
<br>
128 	Invalid argument to exit command
<br>
130 	Script terminated by Control-C
<br>
255* 	Exit status out of range
<br>
<br>
Exit codes 1-2, 126-165, and 255 have special meanings, and should be avoided for user-specified exit parameters to avoid confusion when doing troubleshooting.
<br>
The use of exit 1 is diffuesed, meant as a general error, but its usage is discrouraged because leads to many possible error causes when debugging.
<br>
*Error code 1 is used in the hereby examples to simplify explanation.
<br>
<br>
eg.
<br>
ls -l && free -h; echo $?
<br>
<br>
"ls -l" is the command to view the long listing format of the current directory contents, the same will be produced by "ls -l ." because the default argument "." is implied by ls command itself, once run in a directory which is readable by our user, it will return an exit code 0 without errors.
<br>
If a command produces an exit code !=0 (not equal to 0) it means an error, and the next command will not be run because of the && separator conditional behavior.
<br>
eg.
<br>
ls -l /rooot && free -h ; echo $?
<br>
ls: cannot access '/rooot': No such file or directory
<br>
2
<br>
<br>
Since the first command produces an error code !=0, the next command free -h is not run, this because the chain of commands is interrupted at the first error detected, "echo $?" will show the exit code of the last command run.
<br>
<br>
<h4>Special Variable / Description</h4>
<pre>
$0              The name of the bash script.
$1, $2...$n     The bash script arguments.
$$              The process id of the current shell.
$#              The total number of arguments passed to the script.
$@              The value of all the arguments passed to the script.
$?              The exit status of the last executed command.
$!              The process id of the last executed command.
</pre>
<br>
<h4>One-Liners</h4>
A group of multiple commands, separated by ";" or "&&", written on the same line is called a "one-liner".
<br>
eg. this one-liner will produce the output of every single command in sequence
<br>
echo "---" && ls; echo "---" && free -h; echo "---" && echo "Done" && echo "---";
<br>
<br>
For readability and other purposes, one-liners can be written using the escape character \ (escape the newline),
<br>
splitting the commands on multiple lines, but running them togeter as they were on one single line.
<br>
<br>
eg. pasting the following lines in the terminal, followed by enter, will run all them in sequence
<pre>
echo "---" && \
ls; \
echo "---" && \
free -h; \
echo "---" && \
echo "Today is : $(date)" && \
echo "---";
</pre>
<br>
<br>
<br>
<h4>Hints about "echo"</h4>
The echo command is a Linux built-in command feature, that behave like a function which displays the arguments given as text, such as strings, variables values, output of commands.
<br>
<br>
Echo return status is always 0.
<br>
<br>
Common echo options are:
<br>
-n    do not output the trailing newline
<br>
-e    enable interpretation of backslash escapes
<br>
-E    disable interpretation of backslash escapes (default)
<br>
<br>
Echo escape sequences:
<br>
\b    Backspace
<br>
\\    Backslash
<br>
\n    New Line
<br>
\r    Carriage Return
<br>
\t    Horizontal Tab
<br>
\v    Vertical Tab
<br>
<br>
eg.
<br>
echo "Today is: $(date) - Logged as user: $(whoami) - Shell: $SHELL"; echo "Exit code: $?"
<br>
<br>
Today is: Mon Dec 12 11:22:29 AM CET 2022 - Logged as user: student - Shell: /bin/bash
<br>
<br>
Exit code: 0
<br>
<br>
<hr>
<center>
<p>
<a href="https://linuxcram.github.io/14_loops.html">[14_loops]</a>
 &lt; &gt; 
<a href="https://linuxcram.github.io/16_operators.html">[16_operators]</a>
</p>
</center>
<h3><a href="https://linuxcram.github.io/">HOME</a></h3>
<br>
</body>
</html>
