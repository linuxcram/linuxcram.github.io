<!DOCTYPE html>
<html lang="en">
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>linuxcram.github.io - 18_debug</title>
<style>
header {
  width: 100%;
}
body {
  background: #333333;
  color: #f2f2f2;
  font-size: 14px;
  font-family: monospace;
  text-align: left;
  line-height: 1.3;
  margin: 0;
  border: 20px solid transparent;
}
a:link {
  color: #ff6000;
  background-color: transparent;
  text-decoration: none;
}
a:visited {
  color: #00bbbb;
  background-color: transparent;
  text-decoration: none;
}
a:active {
  color: #00bb00;
  background-color: transparent;
}
hr {
  height: 3px;
  background-color: #00ee00;
  border: none;
}
</style>
</head>
<body>
<div style="text-align: center;">
<img src="https://raw.githubusercontent.com/linuxcram/linuxcram.github.io/main/logo_hackersgen.png" alt="logo_hackersgen" width="348" height="50">
<br>
<img src="https://raw.githubusercontent.com/linuxcram/linuxcram.github.io/main/tux01.png" alt="Tux" width="45" height="45">
<h2>
linuxcram.github.io
</h2>
<img src="https://raw.githubusercontent.com/linuxcram/linuxcram.github.io/main/logo_sorint.png" alt="logo_sorint" width="102" height="30">
&nbsp;&nbsp;&nbsp;
<img src="https://raw.githubusercontent.com/linuxcram/linuxcram.github.io/main/logo_sorint1.png" alt="logo_sorint1" width="30" height="30">
</div>
<h3><a href="https://linuxcram.github.io/">HOME</a></h3>
<div style="text-align: center;">
<p>
<a href="https://linuxcram.github.io/17_bestpractice.html">[17_bestpractice]</a>
 &lt; &gt; 
<a href="https://linuxcram.github.io/19_model.html">[19_model]</a>
</p>
</div>
<hr>
<h3>[18_debug]
<br>
<br>
Bash scripts debug</h3>
Long scripts may be difficult to be analized to find errors, so it's important to know how to debug scripts.
<br>
<br>
<b>Verbose mode</b>
<br>
Bash runs the script and displays all the lines as they are processed by the interpreter
<br>
bash -v script.sh
<br>
<br>
<b>Syntax checking mode</b>
<br>
Bash checks the syntax of the script with the -n (noexec) option, silently returning to the command prompt means that no syntax errors were encountered.
<br>
bash -n script.sh
<br>
<br>
<b>Verbose mode + syntax checking mode</b>
<br>
The two methods are combined.
<br>
bash -vn script.sh
<br>
<br>
<b>Debug mode</b>
<br>
This method displays every command run by a script and its results.
<br>
bash -x script.sh
<br>
<br>
The "-x" debug option can also be set inside a script, the lines affected are placed between set -x (enable debug) and set +x (disable debug).
<br>
<b>Remeber always to "close" the debug option with set +x otherwise the option stays active in the shell, after that the script is executed!</b>
<pre>
eg. script hello.sh
#!/bin/bash
echo "Hello"
set -x
echo "World"
set +x



Exercise: try to debug, and correct this script: badscript.sh
...find all the errors not only limiting to sintax.
#!/bin/bash
# Variables
MYVAR="Linux"
$user=USERNAME
# Commands
cd /home/$USER_Documents && date
echo “Hello $VAR” 
echo Number is $1
# Exit
exit 1
</pre>
<br>
<hr>
<div style="text-align: center;">
<p>
<a href="https://linuxcram.github.io/17_bestpractice.html">[17_bestpractice]</a>
 &lt; &gt; 
<a href="https://linuxcram.github.io/19_model.html">[19_model]</a>
</p>
</div>
<h3><a href="https://linuxcram.github.io/">HOME</a></h3>
<div style="text-align: center;">
<p>
<img src="https://raw.githubusercontent.com/linuxcram/linuxcram.github.io/main/logo_sorint.png" alt="logo_sorint" width="102" height="30">
&nbsp;&nbsp;&nbsp;
<img src="https://raw.githubusercontent.com/linuxcram/linuxcram.github.io/main/logo_sorint1.png" alt="logo_sorint1" width="30" height="30">
</p>
</div>
</body>
</html>
